<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Component Architecture: AEM QA System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        html {
            scroll-behavior: smooth;
        }
        .component-card {
            transition: all 0.2s ease-in-out;
        }
        .component-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .dimmed {
            opacity: 0.3;
            filter: grayscale(80%);
        }
        .highlight {
            opacity: 1 !important;
            filter: none !important;
            border-color: #3b82f6 !important;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
        }
        .arrow {
            transition: color 0.3s ease-in-out;
        }
        .arrow.highlight {
            color: #3b82f6;
        }
        .lang-btn {
            transition: all 0.2s ease-in-out;
        }
        .lang-btn.active {
            background-color: #0ea5e9;
            color: white;
        }
        .lang-btn:not(.active):hover {
            background-color: #e2e8f0;
        }
    </style>
</head>
<body class="text-slate-800">

    <header class="bg-white/90 backdrop-blur-md sticky top-0 z-50 border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <h1 class="text-xl md:text-2xl font-bold text-slate-900" data-i18n="main-title">AEM QA System ì»´í¬ë„ŒíŠ¸ ì•„í‚¤í…ì²˜</h1>
                <div class="flex items-center space-x-4">
                    <!-- Language Selector -->
                    <div class="flex space-x-1 bg-slate-100 rounded-lg p-1">
                        <button class="lang-btn active px-3 py-1 rounded text-sm font-medium" data-lang="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</button>
                        <button class="lang-btn px-3 py-1 rounded text-sm font-medium" data-lang="en">ğŸ‡ºğŸ‡¸ English</button>
                        <button class="lang-btn px-3 py-1 rounded text-sm font-medium" data-lang="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</button>
                    </div>
                    <nav class="hidden md:flex md:space-x-6 text-sm md:text-base">
                        <a href="#block1" class="font-medium text-slate-600 hover:text-sky-600 transition-colors" data-i18n="nav-config">ì„¤ì •</a>
                        <a href="#block2" class="font-medium text-slate-600 hover:text-sky-600 transition-colors" data-i18n="nav-collection">ë°ì´í„° ìˆ˜ì§‘</a>
                        <a href="#block3" class="font-medium text-slate-600 hover:text-sky-600 transition-colors" data-i18n="nav-processing">ë°ì´í„° ì²˜ë¦¬</a>
                        <a href="#block4" class="font-medium text-slate-600 hover:text-sky-600 transition-colors" data-i18n="nav-analysis">ë¶„ì„ ë° ê²€ìƒ‰</a>
                    </nav>
                </div>
            </div>
        </div>
    </header>

    <main id="main-container" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="text-center mb-12">
            <h2 class="text-3xl font-bold text-slate-900" data-i18n="intro-title">í”„ë¡œì„¸ìŠ¤ ë¸”ë¡ë³„ ì•„í‚¤í…ì²˜</h2>
            <p class="mt-4 text-lg text-slate-600 max-w-3xl mx-auto" data-i18n="intro-desc">
                ì‹œìŠ¤í…œì„ êµ¬ì„±í•˜ëŠ” ëª¨ë“  ì†Œí”„íŠ¸ì›¨ì–´ ì»´í¬ë„ŒíŠ¸ì˜ ê´€ê³„ì™€ ìƒí˜¸ì‘ìš©ì„ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤. <span class="font-semibold text-sky-600">ê° ì»´í¬ë„ŒíŠ¸ ì¹´ë“œë¥¼ í´ë¦­</span>í•˜ë©´ ê´€ë ¨ëœ ìš”ì†Œë“¤ì´ ê°•ì¡° í‘œì‹œë©ë‹ˆë‹¤.
            </p>
        </div>

        <!-- Block 1: Configuration -->
        <section id="block1" class="mb-16">
            <h3 class="text-2xl font-bold text-slate-800 border-b-2 border-slate-200 pb-2 mb-6" data-i18n="block1-title">ë¸”ë¡ 1: ì„¤ì • ë° ê³µí†µ ëª¨ë“ˆ</h3>
            <div class="flex flex-col md:flex-row items-center justify-center gap-8">
                <div id="config.py" class="component-card bg-white p-4 rounded-lg border-2 border-blue-300 shadow-md w-full md:w-1/3 cursor-pointer">
                    <h4 class="font-bold text-lg">ğŸ“„ config.py</h4>
                    <div class="mt-2 border-t pt-2">
                        <p class="font-semibold text-sm" data-i18n="config-constants">âš™ï¸ ìƒìˆ˜ (Constants)</p>
                        <ul class="text-xs text-slate-500 list-none mt-1">
                            <li>- MONGO_CONNECTION_STRING</li>
                            <li>- DB_NAME, CHROMA_HOST</li>
                            <li data-i18n="config-other">- (ê¸°íƒ€ ëª¨ë“  ê²½ë¡œ ë° ì„¤ì •)</li>
                        </ul>
                    </div>
                </div>
                <div class="text-4xl text-slate-400 arrow" data-source="config.py" data-target="all">â¡ï¸</div>
                <div class="component-card bg-slate-100 p-4 rounded-lg border-2 border-slate-300 shadow-md w-full md:w-1/3 text-center">
                    <h4 class="font-bold text-lg" data-i18n="all-components">ëª¨ë“  ì‹œìŠ¤í…œ ì»´í¬ë„ŒíŠ¸</h4>
                    <p class="text-sm text-slate-500">(All Other Blocks)</p>
                </div>
            </div>
        </section>

        <!-- Block 2: Data Collection -->
        <section id="block2" class="mb-16">
            <h3 class="text-2xl font-bold text-slate-800 border-b-2 border-slate-200 pb-2 mb-6" data-i18n="block2-title">ë¸”ë¡ 2: ë°ì´í„° ìˆ˜ì§‘ í”„ë¡œì„¸ìŠ¤</h3>
            <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                <h4 class="text-xl font-semibold text-center mb-6 text-emerald-700" data-i18n="collector-components">Collector App Components</h4>
                <div class="flex flex-col md:flex-row items-center justify-center gap-4 md:gap-8">
                    <div id="app.py" class="component-card bg-white p-4 rounded-lg border-2 border-emerald-300 shadow-md cursor-pointer">
                        <h4 class="font-bold text-lg">ğŸ“„ app.py (UI)</h4>
                        <p class="text-sm text-slate-500 mt-1" data-i18n="app-py-desc">Streamlit UI ë Œë”ë§ ë° ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬</p>
                    </div>
                    <div class="text-4xl text-slate-400 arrow" data-source="app.py" data-target="collection_pipeline.py">â¡ï¸</div>
                    <div id="collection_pipeline.py" class="component-card bg-white p-4 rounded-lg border-2 border-emerald-300 shadow-md cursor-pointer">
                        <h4 class="font-bold text-lg">ğŸ“„ collection_pipeline.py</h4>
                        <p class="text-sm text-slate-500 mt-1" data-i18n="pipeline-desc">ì „ì²´ ìˆ˜ì§‘ í”„ë¡œì„¸ìŠ¤ ì¡°ìœ¨</p>
                    </div>
                    <div class="text-4xl text-slate-400 arrow" data-source="collection_pipeline.py" data-target="aem_collector.py package_builder.py">â¡ï¸</div>
                    <div class="flex flex-col gap-4">
                        <div id="aem_collector.py" class="component-card bg-white p-4 rounded-lg border-2 border-indigo-300 shadow-md cursor-pointer">
                            <h4 class="font-bold text-lg">ğŸ“„ aem_collector.py</h4>
                            <p class="font-semibold text-sm mt-1">ğŸ“¦ AEMCollector</p>
                        </div>
                        <div id="package_builder.py" class="component-card bg-white p-4 rounded-lg border-2 border-indigo-300 shadow-md cursor-pointer">
                            <h4 class="font-bold text-lg">ğŸ“„ package_builder.py</h4>
                            <p class="font-semibold text-sm mt-1">ğŸ”§ create_package()</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Block 3: Data Processing -->
        <section id="block3" class="mb-16">
            <h3 class="text-2xl font-bold text-slate-800 border-b-2 border-slate-200 pb-2 mb-6" data-i18n="block3-title">ë¸”ë¡ 3: ë°ì´í„° ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸</h3>
            <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                <h4 class="text-xl font-semibold text-center mb-6 text-indigo-700" data-i18n="admin-components">AEM QA System Components (Admin)</h4>
                <div class="flex flex-col items-center gap-4">
                    <div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
                        <div id="admin_ingestion.py" class="component-card bg-white p-4 rounded-lg border-2 border-emerald-300 shadow-md cursor-pointer text-center">
                            <h4 class="font-bold text-lg">ğŸ“„ admin_ingestion.py</h4>
                        </div>
                        <div id="admin_processing.py" class="component-card bg-white p-4 rounded-lg border-2 border-emerald-300 shadow-md cursor-pointer text-center">
                            <h4 class="font-bold text-lg">ğŸ“„ admin_processing.py</h4>
                        </div>
                        <div id="admin_analysis.py" class="component-card bg-white p-4 rounded-lg border-2 border-emerald-300 shadow-md cursor-pointer text-center">
                            <h4 class="font-bold text-lg">ğŸ“„ admin_analysis.py</h4>
                        </div>
                        <div id="admin_monitoring.py" class="component-card bg-white p-4 rounded-lg border-2 border-emerald-300 shadow-md cursor-pointer text-center">
                            <h4 class="font-bold text-lg">ğŸ“„ admin_monitoring.py</h4>
                        </div>
                    </div>
                    <div class="text-4xl text-slate-400">â¬‡ï¸</div>
                    <div class="flex flex-col md:flex-row items-stretch justify-center gap-4 md:gap-8">
                        <div id="data_ingestor.py" class="component-card bg-white p-4 rounded-lg border-2 border-indigo-300 shadow-md cursor-pointer">
                            <h4 class="font-bold text-lg">ğŸ“„ data_ingestor.py</h4>
                            <p class="font-semibold text-sm mt-1">ğŸ“¦ DataIngestor</p>
                        </div>
                        <div class="flex flex-col items-center justify-center text-4xl text-slate-400 arrow" data-source="admin_processing.py" data-target="utlimate_tm_builder.py">â¡ï¸</div>
                        <div id="utlimate_tm_builder.py" class="component-card bg-white p-4 rounded-lg border-2 border-indigo-300 shadow-md cursor-pointer">
                            <h4 class="font-bold text-lg">ğŸ“„ utlimate_tm_builder.py</h4>
                            <p class="font-semibold text-sm mt-1">ğŸ“¦ UltimateTMBuilder</p>
                        </div>
                        <div class="flex flex-col items-center justify-center text-4xl text-slate-400 arrow" data-source="utlimate_tm_builder.py" data-target="chroma_indexer.py">â¡ï¸</div>
                        <div id="chroma_indexer.py" class="component-card bg-white p-4 rounded-lg border-2 border-indigo-300 shadow-md cursor-pointer">
                            <h4 class="font-bold text-lg">ğŸ“„ chroma_indexer.py</h4>
                            <p class="font-semibold text-sm mt-1">ğŸ“¦ ChromaIndexer</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Block 4: QA Analysis & Search -->
        <section id="block4">
            <h3 class="text-2xl font-bold text-slate-800 border-b-2 border-slate-200 pb-2 mb-6" data-i18n="block4-title">ë¸”ë¡ 4: QA ë¶„ì„ ë° ê²€ìƒ‰</h3>
             <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                <h4 class="text-xl font-semibold text-center mb-6 text-orange-700" data-i18n="qa-components">AEM QA System Components (QA Workstation)</h4>
                <div class="flex flex-col items-center gap-4">
                    <div class="flex gap-4">
                        <div id="qa_dashboard.py" class="component-card bg-white p-4 rounded-lg border-2 border-emerald-300 shadow-md cursor-pointer">
                            <h4 class="font-bold text-lg">ğŸ“„ qa_dashboard.py</h4>
                        </div>
                        <div id="qa_search.py" class="component-card bg-white p-4 rounded-lg border-2 border-emerald-300 shadow-md cursor-pointer">
                            <h4 class="font-bold text-lg">ğŸ“„ qa_search.py</h4>
                        </div>
                    </div>
                    <div class="text-4xl text-slate-400">â¬‡ï¸</div>
                    <div class="flex flex-col md:flex-row items-stretch justify-center gap-4 md:gap-8">
                        <div id="analyzer.py" class="component-card bg-white p-4 rounded-lg border-2 border-orange-300 shadow-md cursor-pointer">
                            <h4 class="font-bold text-lg">ğŸ“„ analyzer.py</h4>
                            <p class="font-semibold text-sm mt-1">ğŸ“¦ PageAnalyzer</p>
                        </div>
                        <div id="searcher.py" class="component-card bg-white p-4 rounded-lg border-2 border-orange-300 shadow-md cursor-pointer">
                            <h4 class="font-bold text-lg">ğŸ“„ searcher.py</h4>
                            <p class="font-semibold text-sm mt-1">ğŸ“¦ TranslationSearcher</p>
                        </div>
                        <div id="connections.py" class="component-card bg-white p-4 rounded-lg border-2 border-orange-300 shadow-md cursor-pointer">
                            <h4 class="font-bold text-lg">ğŸ“„ connections.py</h4>
                            <p class="font-semibold text-sm mt-1" data-i18n="connections-desc">ğŸ”§ DB ì—°ê²° í•¨ìˆ˜</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <script>
        // Translation dictionary
        const translations = {
            ko: {
                "main-title": "AEM QA System ì»´í¬ë„ŒíŠ¸ ì•„í‚¤í…ì²˜",
                "nav-config": "ì„¤ì •",
                "nav-collection": "ë°ì´í„° ìˆ˜ì§‘",
                "nav-processing": "ë°ì´í„° ì²˜ë¦¬",
                "nav-analysis": "ë¶„ì„ ë° ê²€ìƒ‰",
                "intro-title": "í”„ë¡œì„¸ìŠ¤ ë¸”ë¡ë³„ ì•„í‚¤í…ì²˜",
                "intro-desc": "ì‹œìŠ¤í…œì„ êµ¬ì„±í•˜ëŠ” ëª¨ë“  ì†Œí”„íŠ¸ì›¨ì–´ ì»´í¬ë„ŒíŠ¸ì˜ ê´€ê³„ì™€ ìƒí˜¸ì‘ìš©ì„ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤. ê° ì»´í¬ë„ŒíŠ¸ ì¹´ë“œë¥¼ í´ë¦­í•˜ë©´ ê´€ë ¨ëœ ìš”ì†Œë“¤ì´ ê°•ì¡° í‘œì‹œë©ë‹ˆë‹¤.",
                "block1-title": "ë¸”ë¡ 1: ì„¤ì • ë° ê³µí†µ ëª¨ë“ˆ",
                "config-constants": "âš™ï¸ ìƒìˆ˜ (Constants)",
                "config-other": "- (ê¸°íƒ€ ëª¨ë“  ê²½ë¡œ ë° ì„¤ì •)",
                "all-components": "ëª¨ë“  ì‹œìŠ¤í…œ ì»´í¬ë„ŒíŠ¸",
                "block2-title": "ë¸”ë¡ 2: ë°ì´í„° ìˆ˜ì§‘ í”„ë¡œì„¸ìŠ¤",
                "collector-components": "Collector App Components",
                "app-py-desc": "Streamlit UI ë Œë”ë§ ë° ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬",
                "pipeline-desc": "ì „ì²´ ìˆ˜ì§‘ í”„ë¡œì„¸ìŠ¤ ì¡°ìœ¨",
                "block3-title": "ë¸”ë¡ 3: ë°ì´í„° ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸",
                "admin-components": "AEM QA System Components (Admin)",
                "block4-title": "ë¸”ë¡ 4: QA ë¶„ì„ ë° ê²€ìƒ‰",
                "qa-components": "AEM QA System Components (QA Workstation)",
                "connections-desc": "ğŸ”§ DB ì—°ê²° í•¨ìˆ˜"
            },
            en: {
                "main-title": "AEM QA System Component Architecture",
                "nav-config": "Configuration",
                "nav-collection": "Data Collection",
                "nav-processing": "Data Processing",
                "nav-analysis": "Analysis & Search",
                "intro-title": "Architecture by Process Block",
                "intro-desc": "Visually shows the relationships and interactions of all software components that make up the system. Click on each component card to highlight related elements.",
                "block1-title": "Block 1: Configuration & Common Modules",
                "config-constants": "âš™ï¸ Constants",
                "config-other": "- (All other paths and settings)",
                "all-components": "All System Components",
                "block2-title": "Block 2: Data Collection Process",
                "collector-components": "Collector App Components",
                "app-py-desc": "Streamlit UI rendering and user input processing",
                "pipeline-desc": "Orchestrating the entire collection process",
                "block3-title": "Block 3: Data Processing Pipeline",
                "admin-components": "AEM QA System Components (Admin)",
                "block4-title": "Block 4: QA Analysis & Search",
                "qa-components": "AEM QA System Components (QA Workstation)",
                "connections-desc": "ğŸ”§ DB connection functions"
            },
            ja: {
                "main-title": "AEM QAã‚·ã‚¹ãƒ†ãƒ  ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£",
                "nav-config": "è¨­å®š",
                "nav-collection": "ãƒ‡ãƒ¼ã‚¿åé›†",
                "nav-processing": "ãƒ‡ãƒ¼ã‚¿å‡¦ç†",
                "nav-analysis": "åˆ†æãƒ»æ¤œç´¢",
                "intro-title": "ãƒ—ãƒ­ã‚»ã‚¹ãƒ–ãƒ­ãƒƒã‚¯åˆ¥ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£",
                "intro-desc": "ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹æˆã™ã‚‹ã™ã¹ã¦ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é–¢ä¿‚ã¨ç›¸äº’ä½œç”¨ã‚’è¦–è¦šçš„ã«ç¤ºã—ã¾ã™ã€‚å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨é–¢é€£è¦ç´ ãŒãƒã‚¤ãƒ©ã‚¤ãƒˆè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚",
                "block1-title": "ãƒ–ãƒ­ãƒƒã‚¯1: è¨­å®šãƒ»å…±é€šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«",
                "config-constants": "âš™ï¸ å®šæ•° (Constants)",
                "config-other": "- (ãã®ä»–ã™ã¹ã¦ã®ãƒ‘ã‚¹ãƒ»è¨­å®š)",
                "all-components": "ã™ã¹ã¦ã®ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ",
                "block2-title": "ãƒ–ãƒ­ãƒƒã‚¯2: ãƒ‡ãƒ¼ã‚¿åé›†ãƒ—ãƒ­ã‚»ã‚¹",
                "collector-components": "Collector App Components",
                "app-py-desc": "Streamlit UIãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›å‡¦ç†",
                "pipeline-desc": "å…¨ä½“åé›†ãƒ—ãƒ­ã‚»ã‚¹ã®èª¿æ•´",
                "block3-title": "ãƒ–ãƒ­ãƒƒã‚¯3: ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³",
                "admin-components": "AEM QA System Components (Admin)",
                "block4-title": "ãƒ–ãƒ­ãƒƒã‚¯4: QAåˆ†æãƒ»æ¤œç´¢",
                "qa-components": "AEM QA System Components (QA Workstation)",
                "connections-desc": "ğŸ”§ DBæ¥ç¶šé–¢æ•°"
            }
        };

        let currentLang = 'ko';

        function updateContent(lang) {
            const elements = document.querySelectorAll('[data-i18n]');
            elements.forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                    
                    // Handle the special case for intro-desc with HTML content
                    if (key === 'intro-desc') {
                        const text = translations[lang][key];
                        const parts = text.split('ê° ì»´í¬ë„ŒíŠ¸ ì¹´ë“œë¥¼ í´ë¦­');
                        if (parts.length === 2) {
                            element.innerHTML = parts[0] + '<span class="font-semibold text-sky-600">ê° ì»´í¬ë„ŒíŠ¸ ì¹´ë“œë¥¼ í´ë¦­</span>' + parts[1];
                        }
                        
                        // For English
                        const englishParts = text.split('Click on each component card');
                        if (englishParts.length === 2) {
                            element.innerHTML = englishParts[0] + '<span class="font-semibold text-sky-600">Click on each component card</span>' + englishParts[1];
                        }
                        
                        // For Japanese
                        const japaneseParts = text.split('å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯');
                        if (japaneseParts.length === 2) {
                            element.innerHTML = japaneseParts[0] + '<span class="font-semibold text-sky-600">å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯</span>' + japaneseParts[1];
                        }
                    }
                }
            });
            
            // Update HTML lang attribute
            document.documentElement.lang = lang;
            currentLang = lang;
        }

        function updateLanguageButtons(activeLang) {
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-lang') === activeLang) {
                    btn.classList.add('active');
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Language switching functionality
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const lang = btn.getAttribute('data-lang');
                    updateContent(lang);
                    updateLanguageButtons(lang);
                });
            });

            // Component highlighting functionality
            const mainContainer = document.getElementById('main-container');
            const allCards = document.querySelectorAll('.component-card');
            const allArrows = document.querySelectorAll('.arrow');

            const relationships = {
                'config.py': ['all'],
                'app.py': ['collection_pipeline.py'],
                'collection_pipeline.py': ['aem_collector.py', 'package_builder.py'],
                'admin_ingestion.py': ['data_ingestor.py'],
                'admin_processing.py': ['utlimate_tm_builder.py'],
                'utlimate_tm_builder.py': ['chroma_indexer.py'],
                'admin_analysis.py': ['connections.py'],
                'admin_monitoring.py': ['connections.py'],
                'qa_dashboard.py': ['analyzer.py'],
                'qa_search.py': ['searcher.py'],
                'analyzer.py': ['connections.py'],
                'searcher.py': ['connections.py']
            };

            mainContainer.addEventListener('click', (event) => {
                const clickedCard = event.target.closest('.component-card');

                if (clickedCard && clickedCard.id) {
                    const currentlyActive = document.querySelector('.component-card.highlight');
                    if (currentlyActive === clickedCard) {
                        resetHighlights();
                    } else {
                        highlightComponentAndRelations(clickedCard.id);
                    }
                } else if (!clickedCard) {
                    resetHighlights();
                }
            });

            function resetHighlights() {
                allCards.forEach(c => {
                    c.classList.remove('highlight', 'dimmed');
                });
                allArrows.forEach(a => a.classList.remove('highlight'));
            }

            function highlightComponentAndRelations(componentId) {
                resetHighlights();
                
                const relatedComponents = new Set([componentId]);
                
                if (relationships[componentId]) {
                    relationships[componentId].forEach(dep => relatedComponents.add(dep));
                }

                for (const [caller, dependencies] of Object.entries(relationships)) {
                    if (dependencies.includes(componentId)) {
                        relatedComponents.add(caller);
                    }
                }
                
                const dbConsumers = [
                    'analyzer.py', 'searcher.py', 'data_ingestor.py', 
                    'utlimate_tm_builder.py', 'chroma_indexer.py',
                    'admin_analysis.py', 'admin_monitoring.py'
                ];

                if (dbConsumers.includes(componentId)) {
                    relatedComponents.add('connections.py');
                }

                allCards.forEach(card => {
                    if (relatedComponents.has(card.id) || relatedComponents.has('all')) {
                        card.classList.add('highlight');
                    } else {
                        card.classList.add('dimmed');
                    }
                });

                allArrows.forEach(arrow => {
                    const source = arrow.dataset.source ? arrow.dataset.source.split(' ') : [];
                    const target = arrow.dataset.target ? arrow.dataset.target.split(' ') : [];
                    if ( (source.some(s => relatedComponents.has(s)) && target.some(t => relatedComponents.has(t))) ) {
                        arrow.classList.add('highlight');
                    }
                });
            }
        });
    </script>

</body>
</html>